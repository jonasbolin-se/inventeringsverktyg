(function(){function z(a){return{_class:function(a){var c=document.styleSheets,d=[];a.matches=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;for(var e in c){var h=c[e].rules||c[e].cssRules,f=c[e].href,m;for(m in h)try{if(a.matches(h[m].selectorText)){var u,n=h[m].selectorText,r=n.match(/[a-zA-Z0-9_-]+\,[a-zA-Z0-9_-]+/);if(r){var r=r[0],q=n.replace(r,"");selectors=r.split(",");for(var k=0;k<selectors.length;k++)selectors[k]=q+selectors[k]}else selectors=
n.split(",");u=selectors;var p=h[m].selectorText;for(e=0;e<u.length;e++)if(a.matches(u[e])){p=u[e];break}d.push({href:f,css:h[m].cssText,selectors:h[m].selectorText,selector:p})}}catch(s){}}return d}(a),_style:function(a){return(a=a.getAttribute("style"))?a:""}(a)}}function p(a){w.push(a);job.socketReady()&&x&&(x=0,y())}function y(){if(0<w.length){var a=w.shift(),a=encodeURIComponent(a);setTimeout(function(){t.send(a);v=Math.ceil(a.length/50);5E3<v?v=5E3:50>v&&(v=50);0==w.length?(x=1,500<v&&(v=500)):
y()},v)}}debuggap={};var f=function(a,b){b=b?b:document;return b.querySelector(a)},k=function(a,b){b=b?b:document;return b.querySelectorAll(a)},d=debuggap;d.css3Prefix="-webkit-";d.selfClosing={img:1,hr:1,br:1,area:1,base:1,basefont:1,input:1,link:1,meta:1,command:1,embed:1,keygen:1,wbr:1,param:1,source:1,track:1,col:1};d.size=function(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}};d.extend=function(){var a=arguments[0]||{},b=1,c=arguments.length,
d=!1,e;a.constructor==Boolean&&(d=a,a=arguments[1]||{},b=2);"object"!=typeof a&&"function"!=typeof a&&(a={});1==c&&(a=this,b=0);for(;b<c;b++)if(null!=(e=arguments[b]))for(var h in e)a!==e[h]&&(d&&e[h]&&"object"==typeof e[h]&&a[h]&&!e[h].nodeType?a[h]=psoft.extend(d,a[h],e[h]):void 0!=e[h]&&(a[h]=e[h]));return a};d.inherit=function(a){for(var b in a)job[b]&&function(b){var d=job[b];job[b]=function(){d.apply(this,arguments);a[b].apply(this,arguments)}}(b)};d.css=function(a,b,c,d){if("object"==typeof b){a.length||
(a=[a]);for(var e=0;e<a.length;e++){var h=a[e],f;for(f in b)f in h.style?h.style[f]=b[f]:(str=";"+f+":"+b[f],h.style.cssText+=str)}c&&setTimeout(function(){c(a)},d)}else return getComputedStyle(a,null).getPropertyValue(b)};d.classes={add:function(a,b){var c=a.className;this.have(a,b)||(c=c?c+" "+b:b.toString(),a.setAttribute("class",c))},remove:function(a,b){if(b){var c=a.className,c=c.replace(b,"").replace(/^\s+|\s+$/g,"");a.setAttribute("class",c)}else a.className=""},have:function(a,b){return RegExp("\\b"+
b+"\\b").exec(a.className)}};d.scale=function(a){var b;(b=f("#debuggapScale"))&&b.parentNode.removeChild(b);a?s.scaleColor=a:a=s.scaleColor;a=[["top, transparent 4px, "+a+" 5px","10px 5px","100%","10px"],["top, transparent 24px, "+a+" 25px","20px 25px","100%","20px"],["left, transparent 4px, "+a+" 5px","5px 10px","10px","100%"],["left, transparent 24px, "+a+" 25px","25px 20px","20px","100%"]];b=document.createElement("div");b.id="debuggapScale";d.classes.add(b,"dg-scale");for(var c=0;4>c;c++){var g=
document.createElement("div"),e=a[c],e="background:"+d.css3Prefix+"linear-gradient("+e[0]+");background-size:"+e[1]+";height:"+e[2]+";width:"+e[3],e=e+";position:absolute;left:0px;top:0px;z-index:999;";g.setAttribute("style",e);b.appendChild(g)}f("#debuggapRoot").appendChild(b)};d.conf={scaleColor:"#cccccc",lineColor:"#cc6600"};var s={};d.draw={drawLi:function(a){var b=document.createElement("li");b.className="dg-node";if(8==a.nodeType)return a=a.nodeValue,a=a.replace(/\</g,"&lt;").replace(/\>/g,
"&gt;"),b.innerHTML='<pre class="pre"><span class="com">&lt;!--'+a+"--&gt;</span></pre>",b;if(3==a.nodeType)return b.innerHTML='<pre class="pre">'+a.nodeValue+"</pre>",b;if(10==a.nodeType)return b.style.color="#ccc",b.innerHTML="&lt;!DOCTYPE "+a.name+" "+a.publicId+" "+a.systemId+"&gt;",b;for(var c=a.tagName.toLowerCase(),g='<span class="tag">&lt;'+c+"</span>",e=a.attributes,h=null,f=0;f<e.length;f++)g+=' <span class="attr">'+e[f].name+'=</span><span class="val">"'+e[f].value+'"</span>';if(d.selfClosing[c])g+=
'<span class="tag">/&gt;</span>';else{g+='<span class="tag">&gt;</span>';if(a.childNodes.length){g+="...";h=document.createElement("span");h.className="dg-right";var m=document.createElement("span");m.className="dg-tap"}g+='<span class="tag">&lt;/'+c+"&gt;</span>"}b.innerHTML=g;h&&(b.appendChild(h),b.appendChild(m));return b},getRelation:function(a){var b=a.parentNode,c=[];do{for(var g=[],e=d.filterChildNodes(b,[1,3,8]),h=0;h<e.length;h++)"dg-child"!=e[h].className&&g.push(e[h]);for(e=0;e<g.length&&
g[e]!=a;e++);c.unshift(e);if("ul"==b.tagName.toLowerCase()&&"debuggapTree"==b.id)break;a=b.parentNode;do a=a.previousSibling;while(1!=a.nodeType);b=a.parentNode}while(1);return c},findRelation:function(a){var b=d.filterChildNodes(document,[1,3,8,10]),c;do{c=[];for(var g=0;g<b.length;g++)"debuggapRoot"!=b[g].id&&c.push(b[g]);b=a.shift();c=c[b];b=d.filterChildNodes(c,[1,3,8,10])}while(a.length);return c},doAction:function(a){d.classes.have(a,"dg-rotate")?this.del(a):this.add(a.parentNode);delete a},
add:function(a){var b=a.innerHTML,b=b.replace(/\.\.\.(.*?)<\/span>/,"");a.innerHTML=b;var b=this.getRelation(a),b=this.findRelation(b),c=d.filterChildNodes(b,[1,3,8]),g=document.createElement("li");g.className="dg-child";for(var e=document.createElement("ul"),h=0;h<c.length;h++)"debuggapRoot"!=c[h].id&&e.appendChild(this.drawLi(c[h]));g.appendChild(e);c=document.createElement("li");c.className="dg-child";c.innerHTML='<span class="tag">&lt;/'+b.tagName.toLowerCase()+"&gt;</span>";a.parentNode.insertBefore(c,
a.nextSibling);a.parentNode.insertBefore(g,c);b=f(".dg-right",a);d.classes.add(b,"dg-rotate");return a},del:function(a){var b=a.parentNode;a=b.innerHTML;var c=a.match(/&lt;(.+?)<\/span>/)[1];a=a.replace(/&gt;<\/span>/,'&gt;</span>...<span class="tag">&lt;/'+c+"&gt;</span>");b.innerHTML=a;a=b.nextSibling;a.parentNode.removeChild(a);b.parentNode.removeChild(b.nextSibling);a=f(".dg-right",b);d.classes.remove(a,"dg-rotate");d.classes.have(b,"line-wh")&&d.map.treeToEle(b);return b}};d.extend({indexArray:function(a,
b){for(var c=0;c<b.length;c++)if(b[c]==a)return c;return-1},inArray:function(a,b){return-1!=this.indexArray(a,b)?!0:!1},isArray:function(a){return"[object Array]"===toString.call(a)},each:function(a,b,c){if(void 0==a.length)for(var d in a){if(!1===b.call(a[d],d,a[d],c))break}else{d=0;for(var e=a.length;d<e&&!1!==b.call(a[d],d,a[d],c);d++);}},position:function(a){for(var b=0,c=0,d=a.clientWidth,e=a.clientHeight;a&&a!=document.body;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{left:b,top:c,
width:d,height:e}},max:function(a,b){return a>b?a:b},min:function(a,b){return a>b?b:a},preName:function(a){return d.css3Prefix+a},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},createEle:function(a,b,c){a=document.createElement(a);for(var d in b)a.setAttribute(d,b[d]);c&&(a.innerHTML=c);return a},isFunction:function(a){return"function"==typeof a},filterChildNodes:function(a,b){b=b?b:[1,3,8];for(var c=[],g=a.childNodes,e=0;e<g.length;e++)!d.inArray(g[e].nodeType,b)||3==g[e].nodeType&&""==d.trim(g[e].nodeValue)||
c.push(g[e]);return c},ajax:function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0,"","");c.setRequestHeader("Accept","text/plain, */*");c.setRequestHeader("innerUse",!0);c.innerUse=!0;c.onreadystatechange=function(){c&&4==c.readyState&&b(c)};c.send()}});d.map={treeToEle:function(a){this.preShadowNode&&this.removeMap(this.preShadowNode);this.preShadowNode=a;var b=d.draw.getRelation(a),b=d.draw.findRelation(b);this.drawShadow(b);d.classes.add(a,"line-wh");d.each(k("span",a),function(){d.classes.add(this,
"font-wh")})},eleToTree:function(a){var b=d.map.getRelation(a);if(job.socketReady())job.doLeafStructure(b.join(",")),this.drawShadow(a),d.scale();else{d.doc.trigger(k("#debuggapBlock .dg-leaf")[0],"tap");var c=f("#debuggapTree");for(a=0;a<b.length-1;a++){var g=b[a],c=k("li",c)[g];d.draw.add(c);c=c.nextSibling}c=k("li",c)[b[a]];d.map.treeToEle(c)}},getRelation:function(a){var b=[],c=a;do{a=d.filterChildNodes(c.parentNode,[1,3,8,10]);for(var g=0;g<a.length&&a[g]!=c;g++);b.unshift(g);c=c.parentNode}while(c&&
9!=c.nodeType);return b},removeMap:function(a){d.classes.remove(a,"line-wh");d.each(k("span",a),function(){d.classes.remove(this,"font-wh")});(a=f("#debuggapShadow"))&&debuggapNode.removeChild(a);d.each(k(".debuggapLine"),function(){debuggapNode.removeChild(this)});this.preShadowNode=null},drawShadow:function(a){d.doc.bind(document,"taps",function(a){a.preventDefault();a.stopPropagation();d.doc.trigger(f("#debuggapBlock .dg-center"),"tap");d.doc.unbind(document)});var b=f("#debuggapShadow");b&&debuggapNode.removeChild(b);
for(var c=a.getBoundingClientRect(),b=["padding","border","margin"],g=["left","right","top","bottom"],e={},h=0;h<b.length;h++){e[b[h]]=[];var l="";"border"==b[h]&&(l="-width");for(var m=0;m<g.length;m++){var u=b[h]+"-"+g[m]+l;e[b[h]].push(parseInt(d.css(a,u)))}}a=c.left+document.body.scrollLeft;var l=c.top+document.body.scrollTop,n=c.width-e.border[0]-e.border[1],c=c.height-e.border[2]-e.border[3];a=Math.ceil(a-e.margin[0]);var l=Math.ceil(l-e.margin[2]),n=d.max(n-e.padding[0]-e.padding[1],0),c=d.max(c-
e.padding[2]-e.padding[3],0),r=document.createElement("div");d.css(r,{width:n+"px",height:c+"px",opacity:0.5,"background-color":"#3879d9"});for(h=0;4>h;h++)e.margin[h]+=e.border[h];b.splice(1,1);for(m=0;m<b.length;m++){var q=b[m];if(0!=e[q][0]+e[q][1]+e[q][2]+e[q][3]){for(var k=document.createElement("div"),p={opacity:0.8},h=0;h<g.length;h++)u="border-"+g[h],p[u]=e[q][h]+"px solid "+this.borderColor[q];d.css(k,p);k.appendChild(r);r=k}}d.css(r,{position:"absolute",left:a+"px",top:l+"px"});r.id="debuggapShadow";
debuggapNode.insertBefore(r,debuggapNode.childNodes[0]);this.drawLine(a,l,n+e.padding[0]+e.padding[1]+e.margin[0]+e.margin[1],c+e.padding[2]+e.padding[3]+e.margin[2]+e.margin[3])},drawLine:function(a,b,c,g){d.each(k(".debuggapLine"),function(){debuggapNode.removeChild(this)});if(0!=c&&0!=g){var e=d.size().width,h=d.size().height;a=[[a,0,1,b],[a+c-1,0,1,b],[a,b+g,1,h-b-g],[a+c-1,b+g-1,1,h-b-g],[0,b,a,1],[a+c,b,e-a-c,1],[0,b+g-1,a,1],[a+c,b+g-1,e-a-c,1]];b=document.createDocumentFragment();c=s.lineColor;
for(g=0;g<a.length;g++)e=a[g],h=document.createElement("div"),d.css(h,{left:e[0]+"px",top:e[1]+"px",width:e[2]+"px",height:e[3]+"px",position:"absolute","background-color":c}),d.classes.add(h,"debuggapLine"),b.appendChild(h);debuggapNode.insertBefore(b,debuggapNode.childNodes[0])}},noMap:{html:1,head:1,script:1,style:1,meta:1,title:1,option:1},borderColor:{padding:"#329406",border:"#dd903f",margin:"#c56c0e"},preShadowNode:null};d.console={log:function(){var a=this.createLine();d.inArray(this.focus,
["all","log"])||d.css(a,{display:"none"});d.classes.add(a,"dg-l");k("td",a)[1].innerHTML=this.concatArg(arguments)},warn:function(){var a=this.createLine();d.inArray(this.focus,["all","warn"])||d.css(a,{display:"none"});d.classes.add(a,"dg-w");k("td",a)[0].innerHTML='<div class="dg-warn"></div><div class="dg-type-con">!</div>';k("td",a)[1].innerHTML=this.concatArg(arguments)},error:function(){var a=this.createLine();d.inArray(this.focus,["all","error"])||d.css(a,{display:"none"});d.classes.add(a,
"dg-e");k("td",a)[0].innerHTML='<div class="dg-error"></div><div class="dg-type-con">x</div>';k("td",a)[1].innerHTML="<span style='color:red'>"+this.concatArg(arguments)+"</span>"},concatArg:function(a){for(var b="",c=0,d=a.length;c<d;c++)b+=" "+a[c];return b},tryCatch:function(a){this.history[0]!=a&&this.history.unshift(a);this.createLine(a);try{a=/(for|while)/.exec(a)?'return new Function("'+a+'")()':"return "+a;var b=(new Function(a))();b?"string"==typeof b?b='<span style="white-space:pre;color:#cb4416;">'+
b.replace(/\>/g,"&gt;").replace(/\</g,"&lt;")+"</span>":"function"==typeof b&&(b='<span style="white-space:pre">'+b+"</span>"):b+="";this.log(b)}catch(c){this.error(c.name+": "+c.message)}},createLine:function(a){var b=document.createElement("tr");b.innerHTML="<td></td><td></td>";d.each(k("td",b),function(b){this.innerHTML=1==b&&a?'<span style="color:blue;">'+a+"</span>":""});d.classes.add(k("td",b)[0],"dg-type");d.classes.add(k("td",b)[1],"dg-con");f("table",f("#debuggapConsole .dg-console")).appendChild(b);
return b},history:[],index:-1,up:function(){this.index++;this.index<this.history.length?f("#debuggapInput").value=this.history[this.index]:this.index--},down:function(){this.index--;0>this.index?(f("#debuggapInput").value="",this.index=-1):f("#debuggapInput").value=this.history[this.index]},go:function(){var a=f("#debuggapInput");a.value&&(this.tryCatch(a.value),this.index=-1,a.value="")},clean:function(){var a=f(".dg-console",f("#debuggapConsole")),a=k("tr",a);d.each(a,function(){this.parentNode.removeChild(this)})},
focus:"all",filter:function(a){var b=a.innerHTML;if("clean"==b.toLowerCase())return this.clean(),!0;this.focus=b.toLowerCase();d.each(k("span",a.parentNode),function(){this==a?d.classes.add(this,"dg-console-focus"):d.classes.remove(this,"dg-console-focus")});var b=b.toLowerCase()[0],c=f(".dg-console",f("#debuggapConsole")),g="a"==b?{display:"table-row"}:{display:"none"};d.each(k(".dg-l,.dg-e,.dg-w",c),function(){d.css(this,g)});"a"!=b&&d.each(k(".dg-"+b),function(){d.css(this,{display:"table-row"})})},
overwrite:function(){for(var a=["log","warn","error"],b=0;b<a.length;b++){var c=console[a[b]];(function(a,b){console[b]=function(){a.apply(this,arguments);f("#debuggapConsole")&&d.console[b].apply(d.console,arguments);p(b+"Cmd:"+Array.prototype.join.call(arguments,"_dg_"))}})(c,a[b])}c=null;delete null;delete c}};d.event={eventIndex:1,inWrap:function(a,b){var c=a.left+a.width,d=a.top+a.height,e=b.pageX,h=b.pageY;if(e>a.left&&h>a.top&&e<c&&h<d)return!0},register:function(a){if(!(this instanceof arguments.callee))return!0;
var b=a.parentNode,c=0,g=0,e={};this.bind=function(a,b,c){var g;"string"==typeof a?(g=e[a])?g[b]=c:(g={},g[b]=c,e[a]=g):a.dgEventIndex?(g=e[a.dgEventIndex])?g[b]=c:(g={},g[b]=c,e[a.dgEventIndex]=g):(a.dgEventIndex=d.event.eventIndex++,g={},g[b]=c,e[a.dgEventIndex]=g)};this.unbind=function(a){a.dgEventIndex&&e[a.dgEventIndex]&&(e[a.dgEventIndex]=null,delete e[a.dgEventIndex])};this.trigger=function(a,b){var c;(c=e[a.dgEventIndex])&&c[b].call(a,null)};this.destroy=function(){e=null;a.removeEventListener("touchmove",
f,!1);a.removeEventListener("touchend",m,!1);a.removeEventListener("touchstart",h,!1);h=m=f=null};var h=function(a){var h=a.touches[0],f=h.target;for(g=0;f!=b&&f;){var q=e[f.dgEventIndex];if(q&&q.scroll)return a=q.scroll,c=0,g=1,a.dgOx=h.pageX,a.dgOy=h.pageY,d.css(a,{"-webkit-transition":""}),h=(a.style.WebkitTransform?a.style.WebkitTransform:"translate(0px,0px)").match(/translate\(([^\)]*)\)/)[1].split(","),a.dgX=parseInt(h[0]),a.dgY=parseInt(h[1]),!0;q&&q.move&&(c=0);if(q&&q.taps&&q.taps.call(f,
a))return!0;f=f.parentNode}},f=function(a){for(var d=a.touches[0],g=d.target;g!=b&&g;){var h=e[g.dgEventIndex];if(h&&h.scroll)return g=h.scroll,c=1,d=Math.abs(d.pageY-g.dgOy)>Math.abs(d.pageX-g.dgOx)?"translate("+g.dgX+"px,"+(d.pageY-g.dgOy+g.dgY)+"px) ":"translate("+(d.pageX-g.dgOx+g.dgX)+"px,"+g.dgY+"px) ",g.style.WebkitTransform=d,a.preventDefault(),!0;if(h&&h.move&&(c=1,a.preventDefault(),a.stopPropagation(),h.move.call(g,a)))return!0;g=g.parentNode}},m=function(a){for(var h=a.changedTouches[0],
f=h.target;f!=b&&f;){var l=f.dgEventIndex,m=(f.tagName||"").toLowerCase();if((l=e[l]?e[l]:e[m])&&l.tap&&!c){if(1==f.nodeType)var k=d.position(f);else g=1;if((g||d.event.inWrap(k,h))&&l.tap.call(f,a))return!0}if(l&&l.scroll&&c)return a=l.scroll,c=0,h=(a.style.WebkitTransform?a.style.WebkitTransform:"translate(0px,0px)").match(/translate\(([^\)]*)\)/)[1].split(","),a.dgX=parseInt(h[0]),a.dgY=parseInt(h[1]),h=d.max(a.scrollHeight-parseInt(d.css(a.parentNode,"height")),0),f=d.max(a.scrollWidth-parseInt(d.css(a.parentNode,
"width")),0),l=k="",m=0,0<a.dgY?(l="0px",m=1):Math.abs(a.dgY)>h&&(l="-"+h+"px",m=1),0<a.dgX?(k="0px",m=1):Math.abs(a.dgX)>f&&(k="-"+f+"px",m=1),m&&(k||(k=a.dgX+"px"),l||(l=a.dgY+"px"),d.css(a,{"-webkit-transition":"-webkit-transform 0.5s","-webkit-transform":"translate("+k+","+l+")"})),!0;f=f.parentNode}};a.addEventListener("touchmove",f,!1);a.addEventListener("touchend",m,!1);a.addEventListener("touchstart",h,!1)}};(function(){var a={},b=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=
function(c,d,g){try{var f=1E3*(new Date).getTime()+Math.floor(1E3*Math.random()),k,n=d,p=n;"http"!=n.slice(0,4)&&("/"==n.slice(0,1)?p=location.protocol+"//"+location.host+n:"./"==n.slice(0,2)&&(p=(location.protocol+"//"+location.host+location.pathname).replace(/\/.[^\/]*$/,"/")+n.slice(2)));k=p;if("http"==k.slice(0,4)||"file"==k.slice(0,4))this.uniqueId=f,a[f]={method:c,url:k,header:{}}}catch(q){}b.apply(this,arguments)};var c=XMLHttpRequest.prototype.setRequestHeader;XMLHttpRequest.prototype.setRequestHeader=
function(b,d){this.uniqueId&&(a[this.uniqueId].header[b]=d);c.apply(this,arguments)};var d=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(b){if(this.uniqueId)if(this.innerUse)a[this.uniqueId]=null,delete a[this.uniqueId],d.apply(this,arguments);else{a[this.uniqueId].body=b;if("http"==a[this.uniqueId].url.slice(0,4)){var c=a[this.uniqueId].url.match(/([^:]+):\/\/([^\/\#\?]+)([^?#]*)([^#]*)(.*)/),f=c[2].split(":")[0],k=c[2].split(":")[1]?c[2].split(":")[1]:"",c={method:a[this.uniqueId].method,
id:this.uniqueId,requestHeaders:a[this.uniqueId].header,httpVersion:"HTTP/1.1",location:{protocol:c[1],host:f,port:k,hostname:c[2],hash:c[5],search:c[4],pathname:c[3],href:c[0]}};b&&(c.payload=b);p("initRequest:"+JSON.stringify(c))}var u=(new Date).getTime(),n=this,r=!1,q=function(){if(!r){r=!0;var b,c;try{b=n.getAllResponseHeaders(),c=n.responseText}catch(d){c=b=""}if("http"==a[n.uniqueId].url.slice(0,4)){var e=b.split("\r\n");b={};for(var g=0,f;g<e.length;g++)if(f=e[g])f=f.split(":"),b[f[0]]=f[1];
b={host:location.host,times:(new Date).getTime()-u,size:c.length,responseHeaders:b,data:c,id:n.uniqueId,statusCode:n.status};p("resultRequest:"+JSON.stringify(b))}}},s=setInterval(function(){4==n.readyState&&(clearInterval(s),q(),a[n.uniqueId]=null,delete a[n.uniqueId])},5),t=function(){if(n.onreadystatechange){clearInterval(v);var a=n.onreadystatechange;n.onreadystatechange=function(){4==n.readyState&&q();a&&a()}}},v=setInterval(function(){t()},0);t();d.apply(n,arguments)}}})();d.init={setting:function(){},
overwriteAjax:function(){var a=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(){this.setRequestHeader("XHR",!0);a.apply(this,arguments)}},addWrap:function(){if(!(debuggapNode=f("#debuggapRoot"))){var a=document.createElement("div");a.id="debuggapRoot";document.body.appendChild(a);debuggapNode=a;d.init.addStyle();d.init.addConsole();d.init.addBlock()}},addStyle:function(){var a=document.createElement("style");a.innerHTML="body{-webkit-text-size-adjust:100%}#debuggapRoot input{font-size:14px;}#debuggapRoot .dg-block{white-space:nowrap;margin: 0px;padding: 20px;}#debuggapRoot td{font-family: arial,sans-serif;letter-spacing: 1px;}#debuggapRoot .dg-scale{}#debuggapRoot li{list-style:none;padding-left:15px;position:relative;font-size:15px;font-family:arial,sans-serif;line-height:18px;}#debuggapRoot ul{list-style:none;padding-left:0px;margin:0px;}span.dg-down{display:inline-block;border-left:5px solid transparent;border-right:5px solid transparent;border-top:10px solid #515151;width:0px;height:0px;position:absolute;left:0px;top:3px;}span.dg-right{-webkit-transition:-webkit-transform 0.5s;transition:transform 0.5s;display:inline-block;border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:10px solid #515151;width:0px;height:0px;position:absolute;left:0px;top:3px;}span.dg-tap{height:18px;padding:0px 25px;left:-30px;position:absolute;}span.dg-rotate{-webkit-transform:rotate(90deg);transform:rotate(90deg);}#debuggapRoot .tag{color:#a5129f;}#debuggapRoot .attr{color:#994500}#debuggapRoot .val{color:#1a1a7e;}#debuggapRoot .com{color:#236e25;}#debuggapRoot .pre{margin:0px;padding:0px;}#debuggapRoot .font-wh{color:#fff;}#debuggapRoot .line-wh{color:#fff;background-color:#3879d9;}#debuggapTree {position:absolute;}.debuggapFull {background-color:rgba(255,255,255,0.5);position:absolute;left:0px;top:0px;right:0px;bottom:0px;z-index:999;overflow:hidden;}.debuggapFull0 {background-color:rgba(255,255,255,1);position:absolute;left:0px;top:0px;right:0px;bottom:0px;z-index:999;overflow:hidden;}#debuggapRoot .dg-out{background-color: transparent;position: absolute;z-index: 999;top: 20px;right: 20px;border: 2px solid #00abe3;border-radius: 30px;width: 30px;height: 30px;box-sizing: content-box;}#debuggapRoot .dg-inner{width:20px;height: 20px;background: #ccc;margin: 5px;border-radius: 20px;background-color: #00abe3;}#debuggapConsole{display:none;padding:10px;margin:0px;}#debuggapConsole .dg-console{overflow:hidden;border-top:1px solid #ccc;margin-top:2px;}#debuggapConsole .dg-console tr{display:table-row}#debuggapInput {width:100%;line-height:16px;padding:2px;margin:0px;border:1px solid #ccc;outline-style:none;}#debuggapConsole .dg-up{border-left:8px solid transparent;border-bottom:16px solid #515151;border-right:8px solid transparent;width:0px;height:0px;position:absolute;left:0px;top:7px;}#debuggapConsole .dg-go{border-top:8px solid transparent;border-bottom:8px solid transparent;border-left:16px solid #515151;width:0px;height:0px;position:absolute;right:0px;top:2px;}#debuggapConsole .dg-down{border-top:16px solid #515151;border-right:8px solid transparent;border-left:8px solid transparent;width:0px;height:0px;position:absolute;left:0px;top:7px;}#debuggapConsole .dg-upP{width:20px;height:25px;position:absolute;left:0px;top:0px;}#debuggapConsole .dg-downP{width:20px;height:25px;position:absolute;left:25px;top:0px;}#debuggapConsole .dg-goP{width:30px;height:20px;position:absolute;right:0px;top:0px;}#debuggapConsole .dg-type{width:20px;height:16px;text-align:center;position:relative;}#debuggapConsole .dg-con{border-bottom:1px solid #ccc;font-size:11px ! important;word-break:break-all;}#debuggapConsole .dg-error{border:6px solid #d80c15;border-radius:6px;width:0px;height:0px;position:absolute;left:0px;top:1px;}#debuggapConsole .dg-type-con{width:10px;height:10px;position:absolute;left:1px;top:1px;color:#fff;line-height:10px;font-size:14px;}#debuggapConsole .dg-warn{border-left:6px solid transparent;border-bottom:12px solid #f4bd00;border-right:6px solid transparent;width:0px;height:0px;position:absolute;left:0px;top:1px;}#debuggapConsole .dg-console-info{padding:0px 5px;color:#fff;background-color:#a8a8a8;border-radius:10px;margin-right:5px;font-size:14px;}#debuggapConsole .dg-console-focus{background-color:rgb(0,171,227);}#debuggapConfig {padding:10px;margin:0px;}#debuggapConfig .dg-conf-bts{height:30px;overflow:hidden;}#debuggapConfig .dg-conf-left{border-radius:5px;float:left;background-color:rgb(0,171,227);color:#fff;border:0px}#debuggapConfig .dg-conf-right{border-radius:5px;float:right;background-color:rgb(0,171,227);color:#fff;border:0px;}#debuggapBlock {}#debuggapBlock .dg-leaf{width:70px;height:70px;border-radius:30px;text-align:center;line-height:70px;color:#fff;margin:1px;float:left;background-color:rgba(0,171,227,0.7);}#debuggapBlock .dg-flower{width:144px;height:144px;position:absolute;z-index:999;left:50%;top:50%;margin-left:-72px;margin-top:-72px;opacity:0;display:none;-webkit-transition:opacity 0.5s;}#debuggapBlock .dg-center{width:50px;height:50px;position:absolute;left:47px;top:47px;border-radius:50px;text-align:center;line-height:50px;color:#fff;margin:1px;float:left;background-color:rgba(0,171,227,1);}";
debuggapNode.appendChild(a)},addBlock:function(){var a=document.createElement("div");a.id="debuggapBlock";a.innerHTML='<div id="debuggapScrim" class="debuggapFull" style="display:none;"></div><div class="dg-flower" class="dg-flower"><div class="dg-leaf" style="border-top-left-radius:0px;">Nodes</div><div class="dg-leaf" style="border-top-right-radius:0px;">Inspect</div><div class="dg-leaf" style="border-bottom-left-radius:0px;">Config</div><div class="dg-leaf" style="border-bottom-right-radius:0px;" >Console</div><div class="dg-center">Close</div></div><div class="dg-out"><div class="dg-inner"></div></div>';
debuggapNode.appendChild(a)},addConsole:function(){var a=document.createElement("div");a.id="debuggapConsole";a.innerHTML='<table border=0 cellpadding="0" cellspacing="0" width=100%><tr><td><input type="txt" id="debuggapInput"/></td><td> <div style="position:relative;width:25px;height:22px;"><div class="dg-goP"><div class="dg-go"></div></div></div></td></tr><tr><td colspan=2 ><div style="height:25px;width:100%;position:relative;"><div class="dg-upP"><div class="dg-up"></div></div><div class="dg-downP"><div class="dg-down"></div></div><div style="position:absolute;right:0px;top: 7px;"><span class="dg-console-info dg-console-focus">All</span><span class="dg-console-info">Error</span><span class="dg-console-info">Warn</span><span class="dg-console-info">Log</span><span class="dg-console-info">Clean</span> </div></div></td></tr></table><div class="dg-console"><table border=0 cellpadding="0" cellspacing="0" width=100%></table></div>';
debuggapNode.appendChild(a)},showTree:function(){var a=document.createElement("ul");a.id="debuggapTree";d.classes.add(a,"dg-block");for(var b=0;b<document.childNodes.length;b++){var c=debuggap.draw.drawLi(document.childNodes[b]);a.appendChild(c)}debuggapNode.appendChild(a);d.scale();d.classes.add(f("#debuggapRoot"),"debuggapFull");d.css(f("#debuggapTree"),{"min-width":debuggap.size.width+"px","min-height":debuggap.size.height+"px"})},destroyTree:function(){debuggapNode.removeChild(f("#debuggapTree"));
debuggapNode.removeChild(f("#debuggapScale"));d.classes.remove(debuggapNode,"debuggapFull")},showConfig:function(){if(!f("#debuggapConfig")){var a=document.createElement("div");a.id="debuggapConfig";a.innerHTML='<table width="100%" border=0><caption>Config Setting</caption><tr><td>scale color:</td><td><input type="txt" id="scaleColor"/></td></tr><tr><td>line color:</td><td><input type="txt" id="lineColor"/></td></tr></table><div class="dg-conf-bts"><input class="dg-conf-left" type="button" value="reset"/><input class="dg-conf-right"  type="button" value="modify"/></div><hr/>click the following button to connect to remote DebugGap<br/><div class="dg-socket-bts"><b>Server</b> : <input type="txt" id="dgSocketHost" style="width:100px"> : <input type="txt" id="dgSocketPort" style="width:50px"> <input class="dg-conf-right" id="dgConnect" type="button" value="Connect"/></div>';
debuggapNode.appendChild(a);for(var b in s)f("#"+b)&&(f("#"+b).value=s[b])}},daemon:function(){var a=0,b=setInterval(function(){f("#debuggapRoot")||d.init.addWrap();10<=++a&&(d.start(),clearInterval(b))},200)},reconnect:function(){localStorage.expired&&(new Date).getTime()<localStorage.expired&&(d.extend(d.conf,{host:localStorage.host,port:localStorage.port,protocal:localStorage.protocal,name:localStorage.name}),d.initSocket(d.conf))}};d.ready=function(){debuggap.extend(s,d.conf);d.console.overwrite();
d.init.addWrap();d.init.daemon();d.init.reconnect()};d.start=function(){var a=new d.event.register(document);d.doc=a;a.bind(f("#debuggapBlock .dg-out"),"tap",function(){a.unbind(document);var b=f("#debuggapBlock .dg-flower");0==d.css(b,"opacity")?(d.css(f("#debuggapScrim"),{display:"block"}),d.css(f(".dg-out"),{display:"none"}),d.css(b,{opacity:1,display:"block"})):d.css(b,{opacity:0},function(a){d.css(a,{display:"none"})},500);return!0});a.bind(f("#debuggapBlock .dg-out"),"move",function(a){var c=
a.touches[0];a=c.pageX;var c=c.pageY,g=d.size().width-40,e=d.size().height-40;10>a?a=10:a>g&&(a=g);10>c?c=10:c>e&&(c=e);d.css(this,{top:c+"px",left:a+"px"});return!0});a.bind("span","tap",function(){if(d.classes.have(this,"dg-tap")){var a=f(".dg-right",this.parentNode);d.draw.doAction(a);return!0}if(d.classes.have(this,"dg-console-info"))return d.console.filter(this),!0});a.bind("li","tap",function(){if(d.classes.have(this,"dg-node")){var a=this.innerHTML.match(/&lt;(.*?)<\/span>/)[1];d.map.noMap[a]||
(d.classes.have(this,"line-wh")?d.map.removeMap(this):d.map.treeToEle(this));return!0}});a.bind("input","tap",function(){if(this.parentNode&&"dg-conf-bts"==this.parentNode.className){if("reset"==this.value)for(var a in s)f("#"+a)&&(s[a]=f("#"+a).value=d.conf[a]);else for(a in s)f("#"+a)&&(s[a]=f("#"+a).value);return!0}this.parentNode&&("dg-socket-bts"==this.parentNode.className&&"button"==this.type)&&(d.extend(d.conf,{host:f("#dgSocketHost").value,port:f("#dgSocketPort").value,protocal:"websocket",
name:"debuggap_client"}),localStorage.host=d.conf.host,localStorage.port=d.conf.port,localStorage.protocal=d.conf.protocal,localStorage.name=d.conf.name,localStorage.expired=(new Date).getTime()+36E5,this.value="Connecting",d.initSocket(d.conf))});a.bind(f("#debuggapScrim"),"tap",function(a){d.css(this,{display:"none"});d.css(f("#debuggapBlock .dg-flower"),{opacity:0},function(a){d.css(a,{display:"none"})},500);d.css(f(".dg-out"),{display:"block"});return!0});a.bind(k("#debuggapBlock .dg-leaf")[0],
"tap",function(b){a.trigger(f("#debuggapBlock .dg-center"),"tap");d.init.showTree();a.bind(f("#debuggapRoot"),"scroll",f("#debuggapTree"));return!0});a.bind(k("#debuggapBlock .dg-leaf")[1],"tap",function(b){a.trigger(f("#debuggapBlock .dg-center"),"tap");a.bind(f("#debuggapRoot"),"scroll",null);a.bind(document,"taps",function(b){a.unbind(document);var g=b.changedTouches[0].target;d.inArray(g.className,["dg-inner","dg-out"])||d.map.eleToTree(g);b.preventDefault()});b.preventDefault();b.stopPropagation();
return!0});a.bind(k("#debuggapBlock .dg-leaf")[2],"tap",function(b){a.trigger(f("#debuggapBlock .dg-center"),"tap");d.classes.add(f("#debuggapRoot"),"debuggapFull0");d.init.showConfig();b="";try{b=JSON.parse(b),b=b.split(":"),f("#dgSocketHost").value=b[0],f("#dgSocketPort").value=b[1]}catch(c){localStorage.host&&(f("#dgSocketHost").value=localStorage.host,f("#dgSocketPort").value=localStorage.port)}return!0});a.bind(k("#debuggapBlock .dg-leaf")[3],"tap",function(b){a.trigger(f("#debuggapBlock .dg-center"),
"tap");d.css(f("#debuggapConsole"),{display:"block"});d.classes.add(f("#debuggapRoot"),"debuggapFull0");a.bind(f("#debuggapRoot"),"scroll",f("#debuggapConsole .dg-console table"));d.css(f("#debuggapConsole .dg-console"),{height:d.size().height-65+"px"});return!0});a.bind(f("#debuggapBlock .dg-center"),"tap",function(b){a.trigger(f("#debuggapScrim"),"tap");d.each(k("#debuggapTree,#debuggapScale,#debuggapShadow,#debuggapConfig,.debuggapLine"),function(){debuggapNode.removeChild(this)});d.css(f("#debuggapConsole"),
{display:"none"});d.classes.remove(debuggapNode);return!0});f("#debuggapInput").addEventListener("keypress",function(a){13!=a.which&&13!=a.keyCode||d.console.go()},!1);a.bind(f("#debuggapConsole .dg-upP"),"tap",function(a){d.console.up()});a.bind(f("#debuggapConsole .dg-goP"),"tap",function(a){d.console.go()});a.bind(f("#debuggapConsole .dg-downP"),"tap",function(a){d.console.down()})};var t,w=[],v=0,x=1;job={remoteClientReady:!1,socketReady:function(){return t&&1==t.readyState&&job.remoteClientReady},
doReady:function(){console.log("Socket connected successfully")},doInit:function(){this.remoteClientReady=!0;this.preCookie=this.preSessionStorage=this.preLocalStorage="";var a;a=""+(d.indexArray(document.body.parentNode,d.filterChildNodes(document,[1,3,8,10]))+",");a+=d.indexArray(document.body,d.filterChildNodes(document.body.parentNode,[1,3,8,10]));this.doAllStructure(a)},doAllStructure:function(a){a=job._getStructure(a);p("allStructure:"+JSON.stringify(a))},doLeafStructure:function(a){var b=a.lastIndexOf(","),
c=a.substr(b+1);a=a.substr(0,b);a=job._getStructure(a);p("leafStructure:"+c+";"+JSON.stringify(a))},doGetChildren:function(a){for(var b=a.split(","),c,d=job._getStructure(a);b.length;)c=b.shift(),d=d[c].c;p("addChildren:"+a+";"+JSON.stringify(d))},_getStructure:function(a){a=a.split(",");for(var b=document,c=[],g,e=c;a.length;){g=d.filterChildNodes(b,[1,3,8,10]);for(var f=parseInt(a.shift()),l=0;l<g.length;l++)if("debuggapRoot"==g[l].id)g.splice(l,1),l--;else{var k=this._getTagAndAttr(g[l]);c.push(k);
l==f&&(b=g[f])}c=c[f].c}g=d.filterChildNodes(b,[1,3,8,10]);for(l=0;l<g.length;l++)"debuggapRoot"!=g[l].id&&(k=this._getTagAndAttr(g[l]))&&c.push(k);return e},_getTagAndAttr:function(a){var b={t:a.nodeName,c:0<a.childNodes.length?[]:!1};if(1==a.nodeType){a=a.attributes;for(var c=0;c<a.length;c++)b.a||(b.a={}),b.a[a[c].name]=a[c].value}else 10==a.nodeType?(b.s="<!DOCTYPE "+a.name+" "+a.publicId+" "+a.systemId+">",delete b.t):b.s=a.nodeValue;return b},doFile:function(a){setTimeout(function(){d.ajax(a,
function(b){p("fileCon:"+a+"_dg_"+b.responseText)})},100)},doCmd:function(a){try{var b=(new Function("return "+a))();p("logCmd:"+b)}catch(c){b=c.name+": "+c.message,p("errorCmd:"+b)}},doFileTree:function(){this._doFileStart(location.href.replace(location.hash,""));for(var a=document.scripts,b=0;b<a.length;b++)a[b].src&&"chrome-extension"!=a[b].src.substr(0,16)&&this._doFile(a[b].src);a=document.styleSheets;for(b=0;b<a.length;b++)a[b].href&&this._doFile(a[b].href);p("fileTree:"+JSON.stringify([this._sPre,
this._sTitle,this._sFiles]))},_doFile:function(a){a=a.replace(this._sPre,"");a=a.split("/");var b=this._sFiles;if(1==a.length)b.push(a[0]);else{for(var c=0;c<a.length-1;c++){for(var d=a[c],e=b.length,f=!1,k=0;k<e;k++)if("string"!=typeof b[k]&&b[k][d]){b=b[k][d];f=!0;break}if(!f){c=a.slice(c,-1);b=this._sCreateTree(b,c);break}}b.push(a[a.length-1])}b.sort(function(a,b){return a>b?1:-1})},_sCreateTree:function(a,b){for(var c=0;c<b.length;c++){var d={};d[b[c]]=[];var d=a.push(d),e=a;a=a[d-1][b[c]];e.sort(function(a,
b){var c="string"==typeof a,d="string"==typeof b;return c&&d?a>b?-1:1:c?1:d?-1:Object.keys(a)[0]>Object.keys(b)[0]?-1:1})}return a},_doFileStart:function(a){this._sPre=a.substring(0,a.lastIndexOf("/")+1);this._sFiles=[];this._sTitle=a.substring(a.lastIndexOf("/")+1)},preLocalStorage:"",doLocalStorage:function(){var a=this._addDot(localStorage);a!=this.preLocalStorage&&(this.preLocalStorage=a,p("localStorage:"+a))},preSessionStorage:"",doSessionStorage:function(){var a=this._addDot(sessionStorage);
a!=this.preSessionStorage&&(this.preSessionStorage=a,p("sessionStorage:"+a))},_addDot:function(a){var b={},c;for(c in a)b[c]=a[c].substr(0,250),250<a[c].length&&(b[c]+="...");return JSON.stringify(b)},preCookie:"",doCookie:function(){var a=document.cookie;a!=this.preCookie&&(this.preCookie=a,p("cookie:"+a))},doDelLocalStorage:function(a){localStorage[a]=null;delete localStorage[a]},doDelSessionStorage:function(a){sessionStorage[a]=null;delete sessionStorage[a]},doDelCookie:function(a){var b=new Date;
b.setTime(b.getTime()-1E4);document.cookie=a+"=0; expires="+b.toGMTString()},doCacheFile:function(a){var b=a.indexOf("_dg_");if(!(1>b)){var c=a.substring(0,b);a=a.substring(b+4);b=c.substring(c.lastIndexOf(".")+1);"js"==b?this._doCacheJs(c,a):"css"==b&&this._doCacheCss(c,a)}},_doCacheJs:function(a,b){f('script[_src="'+a+'"]')&&f('script[_src="'+a+'"]').remove();f("#debuggapRoot").appendChild(d.createEle("script",{_src:a},b))},_doCacheCss:function(a,b){var c=null,c=f('style[_href="'+a+'"]')?f('style[_href="'+
a+'"]'):job.deepFinder("link",a);c.parentNode.insertBefore(d.createEle("style",{_href:a},b),c);c.remove()},doRelationToEle:function(a){a=a.split(",");a=d.draw.findRelation(a);1==a.nodeType&&(this._getCalculateCss(a),d.doc.trigger(f("#debuggapBlock .dg-center"),"tap"),d.map.drawShadow(a),d.scale())},_getCalculateCss:function(a){a=z(a);p("calculateCss:"+JSON.stringify(a))},doAddCssForElement:function(a){a=a.split(";");var b=d.draw.findRelation(a[0].split(","));b.style.cssText+=a[1];d.map.drawShadow(b);
this._getCalculateCss(b)},doRemoveCssForElement:function(a){a=a.split(";");var b=d.draw.findRelation(a[0].split(",")),c=d.trim(b.getAttribute("style")),c=c.replace(/^;+|;+$/g,""),c=c.split(";");c.splice(parseInt(a[1]),1);c=c.join(";");b.setAttribute("style",c);d.map.drawShadow(b);this._getCalculateCss(b)},doGetPrompt:function(a){var b=a.substr(0,a.indexOf(":")),c=a.substr(a.indexOf(":")+1).split(".");a=window;for(var d=c.length,e=0;e<d-1;e++)try{a=a[c[e]]}catch(f){p("prompt:"+b+":"+JSON.stringify({msg:f.message}))}var k=
[],c=RegExp("^"+c[d-1]);for(e in a)c.test(e)&&k.push(e);p("prompt:"+b+":"+JSON.stringify(k))}};d.extend(job,{deepFinder:function(a,b){for(var c="script"==a?"src":"href",d=k(a),e=0;e<d.length;e++)if(d[e][c]==b)return d[e];return null}});d.extend({initSocket:function(a){var b="ws://"+a.host+":"+a.port;a.name&&(b+="/"+a.name);try{t=new WebSocket(b,a.protocal),t.onopen=function(a){t.send(encodeURIComponent("initClient:"+navigator.userAgent));f("#dgConnect")&&(f("#dgConnect").value="Connect")},t.onmessage=
function(a){a=a.data;a=decodeURIComponent(a);var b=a.indexOf(":");if(!(1>b)){var c=a.substring(0,b);a=a.substring(b+1);b="do"+c[0].toUpperCase()+c.substring(1);job[b](a)}},t.onclose=function(a){f("#dgConnect")&&(f("#dgConnect").value="Connect");console.log("Socket disconnected",JSON.stringify(a))}}catch(c){console.log(c)}}});d.init.overwriteAjax();(function(){/loaded|complete/.test(document.readyState)?setTimeout(d.ready,10):setTimeout(arguments.callee,10)})();d.inherit({});d.extend(job,{_doCacheJs:function(a,
b){var c=job.filterCon(b);c.length?job.setPrototype(c):(f('script[_src="'+a+'"]')&&f('script[_src="'+a+'"]').remove(),f("#debuggapRoot").appendChild(d.createEle("script",{_src:a},b)))},filterCon:function(a){var b=0,c=[];do{var d=a.indexOf("enyo.kind");if(-1!=d){a=a.replace("enyo.kind","");for(var e=[],f=b;f<a.length;f++){var k=a.charCodeAt(f);if(123==k)e.push(f);else if(125==k)if(1>e.length){alert("remote debug error");break}else if(1==e.length){e.push(f);b=f+1;break}else e.pop()}2==e.length?c.push(a.substring(e[0],
e[1]+1)):alert("remote debug error")}}while(-1!=d);return c},setPrototype:function(a){for(var b=0;b<a.length;b++){var c=(new Function("return "+a[b]))(),f=c.name?c.name:c.kind?c.kind:null;if(f){var f=enyo.getPath(f),e;for(e in c)d.isFunction(c[e])&&(f.prototype[e]=c[e])}}}})})();
